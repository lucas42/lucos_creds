<html>
	<head>
		<title>LucOs Credentials - <%= system %>: <%= environment %></title>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width" />
		<link href="/style.css" rel="stylesheet" />
		<link rel="icon" href="/icon.png" />
	</head>
	<body>
		<lucos-navbar><a href="/">Credential List</a></lucos-navbar>
		<main>
			<h1><span class="system-name"><%= system.replaceAll("_", " ") %>:</span> <span class="environment-name environment-<%= environment %>"><%= environment %></span></h1>
			<div class="floating-button-set">
				<form action="/update-simple-credential" method="get" class="inline-form">
					<input type="hidden" name="system" value="<%= system %>" />
					<input type="hidden" name="environment" value="<%= environment %>" />
					<input type="submit" title="Add Credential" value="＋" class="inline-button add-button" />
				</form>
			</div>
			<ul id="credential-list">
				<% for(const key in creds) {
					const viewpath = `/system/${encodeURI(system)}/${encodeURI(environment)}/${encodeURI(key)}`;
				%>
				<li>
					<span class="key"><%= key %></span>
					<form action="<%= viewpath %>" method="get" class="inline-form">
						<input type="submit" title="View Credential" value="⏿" class="inline-button view-button" />
					</form>
					<% if (creds[key].type == "simple") { %>
						<form action="/update-simple-credential" method="get" class="inline-form">
							<input type="hidden" name="system" value="<%= system %>" />
							<input type="hidden" name="environment" value="<%= environment %>" />
							<input type="hidden" name="key" value="<%= key %>" />
							<input type="submit" title="Edit Credential" value="✎" class="inline-button edit-button" />
						</form>
						<form action="/delete-simple-credential" method="get" class="inline-form">
							<input type="hidden" name="system" value="<%= system %>" />
							<input type="hidden" name="environment" value="<%= environment %>" />
							<input type="hidden" name="key" value="<%= key %>" />
							<input type="submit" title="Delete Credential" value="⛌" class="inline-button delete-button" />
						</form>
					<% } else if (creds[key].type == "client") { %>
						<form action="/update-linked-credential" method="get" class="inline-form">
							<input type="hidden" name="clientsystem" value="<%= system %>" />
							<input type="hidden" name="clientenvironment" value="<%= environment %>" />
							<input type="hidden" name="serversystem" value="<%= key.replace("KEY_", "").toLowerCase() %>" />
							<input type="submit" title="Refresh Credential" value="♺" class="inline-button refresh-button" />
						</form>
					<% } else if (creds[key].type == "server") { %>
						<form action="/update-linked-credential" method="get" class="inline-form">
							<input type="hidden" name="serversystem" value="<%= system %>" />
							<input type="hidden" name="serverenvironment" value="<%= environment %>" />
							<input type="submit" title="Refresh Credential" value="♺" class="inline-button refresh-button" />
						</form>
					<% } %>
				</li>
				<% } %>
			</ul>
		</main>
		<script type="text/javascript" src="/client.js"></script>
	</body>
</html>